<!--
This view contains the template to display the bika listing filter bar which
allows the user to filter the list by more than one field or rang of values.
This bar should display a “filter” button in order to submit the changes.
This filter shouldn’t override the filter by state functionality
-->
<tal:tr-filter
    tal:define="filter_fields view/filter_bar_builder">
<tr
    class="bika_listing_filter_bar noborder"
    tal:condition="filter_fields">
    <td class="bika_listing_filter_bar noborder" style="whitespace:nowrap"
        tal:repeat="field filter_fields">
        <label
            tal:content="python: field.get('label', '')">Label</label>
        <!-- Select field type -->
        <select
            tal:condition="python: field.get('type', '') == 'select'"
            tal:attributes="
                name python: 'bika_listing_filter_bar_' + field.get('name', '');"
            tal:define="
                olist python: field.get('voc', []);
                ">
                <option
                    value=""/>
                <option
                    tal:repeat="option olist"
                    tal:content="python:olist.getValue(option)"
                    tal:attributes="
                        value python: option;"
                    />
        </select>
        <!-- Multiple select field type -->
        <select
            tal:condition="python: field.get('type', '') == 'multiple'"
            multiple="true" size='2'
            tal:attributes="
                name python: 'bika_listing_filter_bar_' + field.get('name', '');"
            tal:define="
                olist python: field.get('voc', []);
                ">
                <option
                    tal:repeat="option olist"
                    tal:content="python:olist.getValue(option)"
                    tal:attributes="
                        value python: option;"
                    />
        </select>
        <!-- simple text input -->
        <input
            tal:condition="python: field.get('type', '') == 'text'"
            tal:attributes="
                name python: 'bika_listing_filter_bar_' + field.get('name', '');"
                >
        </input>
        <!-- autocoplete text input -->
        <input
            tal:condition="python: field.get('type', '') == 'autocomplete_text'"
            class="autocomplete"
            tal:attributes="
                name python: 'bika_listing_filter_bar_' + field.get('name', '');
                voc python: field.get('voc', [])"
                >
        </input>
        <!-- value range input -->
        <input
            class="range_0"
            tal:condition="python: field.get('type', '') == 'range'"
            tal:attributes="
                name python: 'bika_listing_filter_bar_' + field.get('name', '') + '_0';"
                >
        </input>
        <input
            class="range_1"
            tal:condition="python: field.get('type', '') == 'range'"
            tal:attributes="
                name python: 'bika_listing_filter_bar_' + field.get('name', '') + '_1';"
                >
        </input>
        <!-- date range input -->
        <input
            class="date_range_start datepicker_range"
            tal:condition="python: field.get('type', '') == 'date_range'"
            tal:attributes="
                name python: 'bika_listing_filter_bar_' + field.get('name', '') + '_0';"
                >
        </input>
        <input
            class="date_range_end datepicker_range"
            tal:condition="python: field.get('type', '') == 'date_range'"
            tal:attributes="
                name python: 'bika_listing_filter_bar_' + field.get('name', '') + '_1';"
                >
        </input>
    </td>
</tr>
<tr tal:condition="filter_fields">
    <td class="bika_listing_filter_bar noborder" style="whitespace:nowrap">
        <input
            type="button"
            id="bika_listing_filter_bar_button"
            tal:attributes="
                value view/filter_bar_button_title;"></input>
        <input
            type="hidden"
            id="bika_listing_filter_bar_submit"
            name="bika_listing_filter_bar_submit"
            value="0"></input>
    </td>
</tr>
</tal:tr-filter>
